GU√çA DE USO COMPLETA - APP PRODUCTOS
=====================================

BASE URL: http://localhost:8000/api/productos/

üìã NOTAS GENERALES:
- Todas las peticiones requieren autenticaci√≥n JWT
- Header: Authorization: Bearer <tu_token>
- Para obtener token: POST /api/usuarios/login/

========================================================================
üì¶ PRODUCTOS PRINCIPALES
========================================================================

üìã LISTAR PRODUCTOS ACTIVOS
GET /productos/
Respuesta: [
  {
    "id": 1,
    "descripcion": "Smartphone Galaxy S23",
    "precio": "999.99",
    "categoria": 1,
    "nombre_categoria": "Electr√≥nicos",
    "marca": 1,
    "nombre_marca": "Samsung",
    "especificaciones": [...],
    "urls": [...],
    "estado": true,
    "fecha_creacion": "2024-01-15T10:30:00Z",
    "fecha_actualizacion": "2024-01-15T10:30:00Z"
  }
]

üìã LISTAR TODOS LOS PRODUCTOS
GET /productos/todos/
Respuesta: [{...}] (incluye productos inactivos)

‚ûï CREAR PRODUCTO
POST /productos/crear/
Body: {
  "descripcion": "Laptop ThinkPad",
  "precio": "1299.99",
  "categoria_id": 1,
  "marca_id": 2
}
Respuesta: {id, descripcion, precio, categoria, nombre_categoria, marca, nombre_marca, ...}

üîç OBTENER PRODUCTO ESPEC√çFICO
GET /productos/1/
Respuesta: {id, descripcion, precio, categoria, nombre_categoria, marca, nombre_marca, especificaciones, urls, ...}

‚úèÔ∏è ACTUALIZAR PRODUCTO
PUT /productos/1/actualizar/
Body: {
  "descripcion": "Laptop ThinkPad X1",
  "precio": "1399.99"
}
Respuesta: {id, descripcion, precio, ...}

üóëÔ∏è ELIMINAR PRODUCTO (L√ìGICA)
DELETE /productos/1/eliminar/
Respuesta: {"message": "Producto eliminado correctamente"}

üîÑ RESTAURAR PRODUCTO
POST /productos/1/restaurar/
Respuesta: {"message": "Producto restaurado", "producto": {...}}

========================================================================
üîç B√öSQUEDAS Y FILTROS DE PRODUCTOS
========================================================================

üîç B√öSQUEDA GENERAL
GET /productos/buscar/?q=galaxy
Respuesta: [{...}] (productos que coincidan en descripci√≥n, categor√≠a o marca)

üìÇ FILTRAR POR CATEGOR√çA
GET /productos/categoria/1/
Respuesta: [{...}] (productos de la categor√≠a 1)

üìÇ FILTRAR POR MARCA
GET /productos/marca/1/
Respuesta: [{...}] (productos de la marca 1)

üìÇ FILTRAR POR CATEGOR√çA Y MARCA
GET /productos/categoria/1/marca/1/
Respuesta: [{...}] (productos de categor√≠a 1 y marca 1)

========================================================================
üìù ESPECIFICACIONES DE PRODUCTOS
========================================================================

üìã LISTAR TODAS LAS ESPECIFICACIONES
GET /especificaciones/
Respuesta: [
  {
    "id": 1,
    "nombre": "Pantalla",
    "descripcion": "6.1 pulgadas OLED",
    "producto": 1,
    "producto_descripcion": "Smartphone Galaxy S23",
    "estado": true
  }
]

üìã LISTAR ESPECIFICACIONES DE UN PRODUCTO
GET /especificaciones/producto/1/
Respuesta: [{...}] (especificaciones del producto 1)

‚ûï CREAR ESPECIFICACI√ìN
POST /especificaciones/crear/
Body: {
  "nombre": "Procesador",
  "descripcion": "Snapdragon 8 Gen 2",
  "producto_id": 1
}
Respuesta: {id, nombre, descripcion, producto, producto_descripcion, estado}

‚úèÔ∏è ACTUALIZAR ESPECIFICACI√ìN
PUT /especificaciones/1/actualizar/
Body: {
  "descripcion": "Snapdragon 8 Gen 2, 3.36GHz"
}
Respuesta: {id, nombre, descripcion, ...}

üóëÔ∏è ELIMINAR ESPECIFICACI√ìN
DELETE /especificaciones/1/eliminar/
Respuesta: {"message": "Especificaci√≥n eliminada correctamente"}

üîÑ RESTAURAR ESPECIFICACI√ìN
POST /especificaciones/1/restaurar/
Respuesta: {"message": "Especificaci√≥n restaurada", "especificacion": {...}}

========================================================================
üîó URLs DE PRODUCTOS
========================================================================

üìã LISTAR TODAS LAS URLs
GET /urls-productos/
Respuesta: [
  {
    "id": 1,
    "url": "https://samsung.com/galaxy-s23",
    "producto": 1,
    "producto_descripcion": "Smartphone Galaxy S23",
    "estado": true,
    "fecha_creacion": "2024-01-15T10:30:00Z"
  }
]

üìã LISTAR URLs DE UN PRODUCTO
GET /urls-productos/producto/1/
Respuesta: [{...}] (URLs del producto 1)

‚ûï CREAR URL DE PRODUCTO
POST /urls-productos/crear/
Body: {
  "url": "https://amazon.com/samsung-galaxy-s23",
  "producto_id": 1
}
Respuesta: {id, url, producto, producto_descripcion, estado, fecha_creacion}

‚úèÔ∏è ACTUALIZAR URL DE PRODUCTO
PUT /urls-productos/1/actualizar/
Body: {
  "url": "https://nueva-url.com/producto"
}
Respuesta: {id, url, ...}

üóëÔ∏è ELIMINAR URL DE PRODUCTO
DELETE /urls-productos/1/eliminar/
Respuesta: {"message": "URL eliminada correctamente"}

üîÑ RESTAURAR URL DE PRODUCTO
POST /urls-productos/1/restaurar/
Respuesta: {"message": "URL restaurada", "url_producto": {...}}

========================================================================
üìä INVENTARIO DE PRODUCTOS
========================================================================

üìã LISTAR TODO EL INVENTARIO
GET /inventario/
Respuesta: [
  {
    "id": 1,
    "cantidad": 50,
    "ubicacion": "Almac√©n A, Estante 3",
    "producto": 1,
    "producto_descripcion": "Smartphone Galaxy S23",
    "estado": true,
    "fecha_actualizacion": "2024-01-15T10:30:00Z"
  }
]

üîç OBTENER INVENTARIO DE UN PRODUCTO
GET /inventario/producto/1/
Respuesta: {id, cantidad, ubicacion, producto, producto_descripcion, ...}

‚ûï CREAR INVENTARIO
POST /inventario/crear/
Body: {
  "cantidad": 25,
  "ubicacion": "Bodega Principal",
  "producto_id": 1
}
Respuesta: {id, cantidad, ubicacion, producto, producto_descripcion, ...}

‚úèÔ∏è ACTUALIZAR INVENTARIO
PUT /inventario/1/actualizar/
Body: {
  "cantidad": 30,
  "ubicacion": "Almac√©n B, Estante 5"
}
Respuesta: {id, cantidad, ubicacion, ...}

üóëÔ∏è ELIMINAR INVENTARIO
DELETE /inventario/1/eliminar/
Respuesta: {"message": "Inventario eliminado correctamente"}

üîÑ RESTAURAR INVENTARIO
POST /inventario/1/restaurar/
Respuesta: {"message": "Inventario restaurado", "inventario": {...}}

========================================================================
üí° EJEMPLOS PR√ÅCTICOS DE USO
========================================================================

üìå ESCENARIO 1: Crear producto completo con especificaciones, URLs e inventario

1. Crear producto principal:
POST /productos/crear/
{
  "descripcion": "iPhone 15 Pro",
  "precio": "1199.99",
  "categoria_id": 1,
  "marca_id": 3
}

2. Agregar especificaciones:
POST /especificaciones/crear/
{
  "nombre": "Pantalla",
  "descripcion": "6.1 pulgadas Super Retina XDR",
  "producto_id": 2
}

POST /especificaciones/crear/
{
  "nombre": "C√°mara",
  "descripcion": "Triple c√°mara 48MP + 12MP + 12MP",
  "producto_id": 2
}

3. Agregar URLs:
POST /urls-productos/crear/
{
  "url": "https://apple.com/iphone-15-pro",
  "producto_id": 2
}

4. Crear inventario:
POST /inventario/crear/
{
  "cantidad": 15,
  "ubicacion": "Almac√©n Premium",
  "producto_id": 2
}

5. Ver producto completo:
GET /productos/2/

üìå ESCENARIO 2: Actualizar stock y agregar nueva URL

1. Ver inventario actual:
GET /inventario/producto/2/

2. Actualizar cantidad:
PUT /inventario/1/actualizar/
{
  "cantidad": 20
}

3. Agregar nueva URL:
POST /urls-productos/crear/
{
  "url": "https://amazon.com/iphone-15-pro",
  "producto_id": 2
}

üìå ESCENARIO 3: B√∫squeda y filtros

1. Buscar todos los iPhones:
GET /productos/buscar/?q=iphone

2. Filtrar por categor√≠a "Electr√≥nicos":
GET /productos/categoria/1/

3. Filtrar por marca "Apple":
GET /productos/marca/3/

4. Combinar filtros:
GET /productos/categoria/1/marca/3/

========================================================================
üõ†Ô∏è EJEMPLOS CON C√ìDIGO
========================================================================

üìå Python requests - Crear producto completo:

import requests

BASE_URL = "http://localhost:8000/api/productos"
TOKEN = "tu_token_jwt"

headers = {"Authorization": f"Bearer {TOKEN}", "Content-Type": "application/json"}

# 1. Crear producto
producto_data = {
    "descripcion": "Monitor 4K Samsung",
    "precio": "399.99",
    "categoria_id": 1,
    "marca_id": 1
}
producto_resp = requests.post(f"{BASE_URL}/productos/crear/", json=producto_data, headers=headers)
producto = producto_resp.json()
producto_id = producto['id']

# 2. Agregar especificaciones
espec_data = {
    "nombre": "Resoluci√≥n",
    "descripcion": "3840 x 2160 pixels 4K UHD",
    "producto_id": producto_id
}
requests.post(f"{BASE_URL}/especificaciones/crear/", json=espec_data, headers=headers)

# 3. Agregar URL
url_data = {
    "url": "https://samsung.com/monitor-4k",
    "producto_id": producto_id
}
requests.post(f"{BASE_URL}/urls-productos/crear/", json=url_data, headers=headers)

# 4. Crear inventario
inventario_data = {
    "cantidad": 8,
    "ubicacion": "Almac√©n Tecnolog√≠a",
    "producto_id": producto_id
}
requests.post(f"{BASE_URL}/inventario/crear/", json=inventario_data, headers=headers)

print(f"‚úÖ Producto {producto_id} creado exitosamente")

üìå JavaScript fetch - Obtener producto con detalles:

async function obtenerProductoCompleto(productoId) {
    const BASE_URL = 'http://localhost:8000/api/productos';
    const token = 'tu_token_jwt';
    
    const headers = {
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'application/json'
    };
    
    try {
        // Obtener producto principal
        const productoResponse = await fetch(`${BASE_URL}/productos/${productoId}/`, { headers });
        const producto = await productoResponse.json();
        
        // Obtener inventario
        const inventarioResponse = await fetch(`${BASE_URL}/inventario/producto/${productoId}/`, { headers });
        const inventario = await inventarioResponse.json();
        
        console.log('üì¶ Producto:', producto);
        console.log('üìä Inventario:', inventario);
        
        return { producto, inventario };
    } catch (error) {
        console.error('‚ùå Error:', error);
    }
}

// Usar la funci√≥n
obtenerProductoCompleto(1);

========================================================================
üö® C√ìDIGOS DE ERROR COMUNES
========================================================================

400 - Bad Request:
- "Ya existe un producto activo con esta descripci√≥n, categor√≠a y marca"
- "Categor√≠a no encontrada o inactiva"
- "Marca no encontrada o inactiva"
- "Producto no encontrado o inactivo"
- "Ya existe una URL activa con este enlace"
- "Ya existe un inventario activo para este producto"

404 - Not Found:
- "Producto no encontrado o inactivo"
- "Especificaci√≥n no encontrada"
- "URL no encontrada"
- "Inventario no encontrado"

401 - Unauthorized:
- Token inv√°lido o faltante

========================================================================
üí° MEJORES PR√ÅCTICAS
========================================================================

1. ‚úÖ Siempre validar que categor√≠as y marcas existan antes de crear productos
2. ‚úÖ Usar b√∫squedas antes de crear para evitar duplicados
3. ‚úÖ Mantener URLs √∫nicas por producto
4. ‚úÖ Actualizar inventario cuando hay movimientos de stock
5. ‚úÖ Usar eliminaci√≥n l√≥gica en lugar de eliminaci√≥n f√≠sica
6. ‚úÖ Incluir el token JWT en todas las peticiones
7. ‚úÖ Verificar respuestas HTTP antes de procesar datos

========================================================================
üéØ FLUJO RECOMENDADO PARA NUEVO PRODUCTO
========================================================================

1. GET /productos/buscar/?q=nombre_producto (verificar si existe)
2. POST /productos/crear/ (crear producto principal)
3. POST /especificaciones/crear/ (agregar caracter√≠sticas)
4. POST /urls-productos/crear/ (agregar enlaces)
5. POST /inventario/crear/ (establecer stock inicial)
6. GET /productos/{id}/ (verificar creaci√≥n completa)